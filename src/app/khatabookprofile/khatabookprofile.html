<div class="profile-container">
   <div class="header">
      <button class="back-btn" (click)="goBack()">‚Üê Back to Users</button>
      <h2>Khatabook User Profile</h2>
   </div>

   <div *ngIf="isLoading" class="loading">
      <p>Loading user profile...</p>
   </div>

   <div *ngIf="errorMessage && !isLoading" class="error">
      <p>{{ errorMessage }}</p>
      <button (click)="goBack()">Return to Users List</button>
   </div>

   <div *ngIf="userProfile && !isLoading" class="profile-details">
      <div class="field">
         <label>Khatabook User ID:</label>
         <span>{{ userProfile.khatabookUserId || userId }}</span>
      </div>
      <div class="field">
         <label>Name:</label>
         <span>{{ userProfile.name }}</span>
      </div>
      <div class="field">
         <label>Mobile:</label>
         <span>{{ userProfile.mobile }}</span>
      </div>
      <div class="field">
         <label>City:</label>
         <span>{{ userProfile.city }}</span>
      </div>
   </div>
</div>
<div class="summary-boxes">
  <div class="summary taken">
    <h4>Total Taken</h4>
    <p>‚Çπ {{ totalTaken }}</p>
  </div>

  <div class="summary given">
    <h4>Total Given</h4>
    <p>‚Çπ {{ totalGiven }}</p>
  </div>

  <div class="summary balance">
    <h4>Final Balance</h4>
    <p>‚Çπ {{ finalBalance }}</p>
  </div>
</div>

<div class="action-buttons">
   <button class="btn taken" (click)="openTransactionModal('taken')">Taken From Admin</button>
   <button class="btn given" (click)="openTransactionModal('given')">Given To Admin</button>
</div>

<div class="modal" *ngIf="showModal">
   <div class="modal-content">
      <h3>{{ transactionType === 'taken' ? 'Taken From Admin' : 'Given To Admin' }}</h3>

      <input type="number" placeholder="Amount" [(ngModel)]="transactionForm.Rs">
      <input type="date" [(ngModel)]="transactionForm.returnDate">
      <input type="text" placeholder="Description" [(ngModel)]="transactionForm.description">
      <input type="number" placeholder="Bill No" [(ngModel)]="transactionForm.billno">

      <!-- Branch select dropdown -->
      <label>Branch:</label>
      <select [(ngModel)]="transactionForm.hotelBranchName">
         <option *ngFor="let b of branchList" [value]="b">{{ b }}</option>
      </select>

      <button (click)="submitTransaction()">Save</button>
      <button (click)="closeModal()">Cancel</button>
   </div>
</div>

<div class="transactions">
  <div class="left">
    <h3>Taken From Admin</h3>
    <div *ngIf="takenList.length === 0">No record</div>
    <div *ngFor="let t of takenList" class="txn">
      <p>‚Çπ {{ t.Rs }}</p>
      <p>{{ t.description }}</p>
      <p>{{ t.paymentMode }}</p>
      <p>{{ t.returnDate | date }}</p>
      <small>{{ t.hotelBranchName }}</small>
       <span class="delete-btn" (click)="deleteTransaction('taken', t._id)">üóëÔ∏è Delete</span>
    </div>
  </div>

  <div class="right">
    <h3>Given To Admin</h3>
    <div *ngIf="givenList.length === 0">No record</div>
    <div *ngFor="let g of givenList" class="txn">
      <p>‚Çπ {{ g.Rs }}</p>
      <p>{{ g.description }}</p>
      <p>{{ g.paymentMode }}</p>
      <p>{{ g.returnDate | date }}</p>
      <small>{{ g.hotelBranchName }}</small>
        <span class="delete-btn" (click)="deleteTransaction('given', g._id)">üóëÔ∏è Delete</span>
    </div>
  </div>
</div>
   