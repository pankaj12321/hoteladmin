<div class="container">

  <!-- LEFT: Customer Profile -->
  <div class="profile-box" *ngIf="customer">
    <h3>Customer Profile</h3>
    <p><b>Name:</b> {{ customer.name }}</p>
    <p><b>Mobile:</b> {{ customer.mobile }}</p>
    <p><b>City:</b> {{ customer.city }}</p>
    <p><b>ID:</b> {{ customer.personalCustomerRecordTranId }}</p>
  </div>

  <!-- RIGHT: Entry Form -->
  <div class="entry-box">
    <h3>Add Payment Entry</h3>

    <input type="number" placeholder="Bill Amount" [(ngModel)]="entry.billAmount">
    <input type="number" placeholder="Amount Paid After Discount" [(ngModel)]="entry.amountPaidAfterDiscount">

    <select [(ngModel)]="entry.paymentMode">
      <option value="cash">Cash</option>
      <option value="online">Online</option>
      <option value="cheque">Cheque</option>
    </select>

    <input type="file" (change)="onFileSelect($event)">

    <textarea placeholder="Description" [(ngModel)]="entry.description"></textarea>

    <select [(ngModel)]="entry.status">
      <option value="Pending">Pending</option>
      <option value="Approved">Approved</option>
    </select>

    <button (click)="addEntry()">Save Entry</button>
  </div>

</div>

<!-- ENTRIES LIST -->
<h3 style="margin-top:20px">Customer Entries</h3>
<div *ngIf="loadingEntries">Loading...</div>
<table *ngIf="!loadingEntries && entries.length > 0" border="1" width="100%">
  <tr>
    <th>#</th>
    <th>Bill Amount</th>
    <th>Paid Amount</th>
    <th>Payment Mode</th>
    <th>Status</th>
    <th>Description</th>
    <th>Screenshot</th>
  </tr>
  <tr *ngFor="let e of entries; let i = index">
    <td>{{ i + 1 }}</td>
    <td>{{ e.billAmount }}</td>
    <td>{{ e.amountPaidAfterDiscount }}</td>
    <td>{{ e.paymentMode | titlecase }}</td>
    <td>{{ e.status }}</td>
    <td>{{ e.description || '-' }}</td>
    <td>
      <a *ngIf="e.paymentScreenshoot" [href]="e.paymentScreenshoot" target="_blank">View</a>
      <span *ngIf="!e.paymentScreenshoot">-</span>
    </td>
  </tr>
</table>
<div *ngIf="!loadingEntries && entries.length === 0">No entries found</div>
